Phase,Workstream,Task,Description,Deliverable,OwnerRole,Priority,Dependencies,AcceptanceCriteria
Phase 0,Governance,Freeze Scope + MVP Definition,"Define MVP features, non-goals, success criteria; document in docs/architecture/overview.md + ADR-0001.",docs/architecture/overview.md + ADR-0001-scope.md,Tech Lead,P0,,MVP is explicit; no ambiguous 'maybe' items; everyone agrees.
Phase 0,Tooling,Repo Scaffold + One-command local run,"Python 3.11+, uv/poetry, make targets, .env.example, basic CLI skeleton.",repo init + `seo-report --help` + `make dev`,Dev Lead,P0,Freeze Scope + MVP Definition,Local run works from clean machine; CI basic pipeline passes.
Phase 0,Security,Secrets Strategy (no secrets in project packs),Decide env var naming + secret store; add secret scanning; implement env validation.,.env.example + env validator + secret scan CI,Security/DevOps,P0,Repo Scaffold + One-command local run,Secrets never committed; app fails fast if missing creds.
Phase 0,Docs,Templates (PR/ADR/Runbook) + CODEOWNERS,Add .github templates + CODEOWNERS; enforce PR checklist.,.github/* + CODEOWNERS,Tech Lead,P0,Repo Scaffold + One-command local run,No merge without template; ownership is clear.
Phase 1,Architecture,Module boundaries + package layout,Split into cli/core/extractors/transforms/render/exports; enforce boundary lint.,app/* skeleton + boundary rules,Tech Lead,P0,Repo Scaffold + One-command local run,Cross-module imports blocked; public APIs defined.
Phase 1,Core,"Pipeline Orchestrator (run_id, month, project)","Implement pipeline runner with step graph, idempotency, caching hooks, state file.",core/orchestrator.py + state schema,Backend Dev,P0,Module boundaries + package layout,Single command runs steps in order; resume works.
Phase 2,Contracts,Define v1 contracts (project.json + report_payload),Write JSON Schemas; add validation in CLI and CI; sample fixtures.,contracts/*.schema.json + fixtures,Backend Dev,P0,"Pipeline Orchestrator (run_id, month, project)",Validation fails on bad input; payload validates.
Phase 2,Registries,Define registries (sources/pipeline/metrics/notion),Create YAML registries; validate against schema; used by orchestrator.,registries/*.yaml + schema,Backend Dev,P0,Define v1 contracts (project.json + report_payload),New source added only via registry.
Phase 2,Generators,Generator: pydantic models + golden outputs,Generate typed config/models and boilerplate; add golden tests.,scripts/generate.py + golden tests,Backend Dev,P1,Define registries (sources/pipeline/metrics/notion),Generated files always in sync; diffs are reviewable.
Phase 3,CI,Quality Gates (lint/type/tests/contracts/golden/security),Configure GitHub Actions required checks; branch protection.,.github/workflows/*,DevOps,P0,Templates (PR/ADR/Runbook) + CODEOWNERS,main always green; no merge without gates.
Phase 4,Integrations,Extractor: GSC searchanalytics (paging),Implement OAuth/SA auth; paging rowLimit/startRow; store raw; normalize.,extractors/gsc.py + tests + contracts/raw/gsc,Backend Dev,P0,Define v1 contracts (project.json + report_payload),Fetch works; rate limits handled; deterministic tests with cassette.
Phase 4,Integrations,Extractor: DataForSEO SERP (stop-on-match),Implement SERP calls for keywords/location/device; use stop_crawl_on_match for cost.,extractors/dataforseo.py + tests + contracts/raw/dataforseo,Backend Dev,P0,Extractor: GSC searchanalytics (paging),Positions computed; cost caps enforced; caching works.
Phase 4,Integrations,Extractor: PageSpeed Insights (mobile/desktop),Implement runPagespeed for URL/origin; raw storage; normalize key metrics.,extractors/pagespeed.py + tests,Backend Dev,P1,Extractor: GSC searchanalytics (paging),Both strategies work; errors retried; quota handled.
Phase 4,Integrations,Extractor: CrUX History API,Implement records:queryHistoryRecord; parse p75 timeseries; eligibility handling.,extractors/crux.py + tests,Backend Dev,P1,Extractor: PageSpeed Insights (mobile/desktop),"p75 extracted; missing data -> warning, not fake."
Phase 4,Integrations,Extractor: Rybbit (optional),Implement bearer auth; sessions/conversions; timezone mapping; raw store.,extractors/rybbit.py + tests,Backend Dev,P2,Extractor: CrUX History API,Enabled projects fetch correctly; disabled does nothing.
Phase 4,Transforms,Staging tables + marts builders,DuckDB pipeline; create monthly marts JSON; compute MoM deltas.,transforms/* + marts/* fixtures,Backend Dev,P0,Extractor: DataForSEO SERP (stop-on-match),Marts reproducible; MoM correct; missing prev month handled.
Phase 4,Core,Payload builder,Combine marts into report_payload.json; completeness score; missing_sources/warnings.,core/payload.py + schema validation,Backend Dev,P0,Staging tables + marts builders,Payload always schema-valid; missing data explicit.
Phase 4,Exports,Notion field pack exporter,Generate notion_fields.md + optional CSV with stable ordering and unique key.,exports/notion.py + fixtures,Backend Dev,P1,Payload builder,Import-friendly output; duplicates mitigated via unique key.
Phase 4,Render,OpenAI report renderer (payload-only),Render report.md from template+rules; strict guardrails; log prompt+model meta.,render/openai.py + configs/report_*,Backend Dev,P1,Payload builder,No numbers outside payload; safe fallback if model errors.
Phase 5,Release,Packaging + versioning,CLI installable via pipx/uv tool; semantic versioning; changelog.,pyproject + release workflow,DevOps,P1,Quality Gates (lint/type/tests/contracts/golden/security),Releases reproducible; version increments consistent.
Phase 5,Ops,Smoke test runbook + rollback,Document smoke tests; keep last known good artifact; rollback steps.,docs/runbooks/*,Tech Lead,P1,Packaging + versioning,Rollback possible in minutes.
Phase 6,Observability,Structured logs + correlation ids,JSON logs; include run_id/project/month/source; store in logs/.,logging config + docs,Backend Dev,P0,"Pipeline Orchestrator (run_id, month, project)",Every run is traceable; errors actionable.
Phase 6,Ops,Drift checks schedule,"Automated monthly check: deps update, registry consistency, docs links.",scripts/drift_check.py + CI schedule,DevOps,P1,Structured logs + correlation ids,System stays clean over time.
